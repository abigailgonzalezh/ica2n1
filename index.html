<html>
  <head>
    <title>Defining a 3D Shape</title>
    <style>
      canvas {
        width: 100%;
        height: 100%;
      }
      body {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <script src="three.min.js"></script>
    <script>
      window.addEventListener("keydown", doKeyDown, true);
      // agregamos el "listener" para "escuchar" los eventos del teclado

      var zpos = 30;
      var xpos = 0;
      var ypos = 0;
      var x = 0.0;
      var y = 0.0;
      var z = 0.0;
      var xx = 0.0;
      var yy = 0.0;
      var zz = 0.0;
      var angle = 0;

      function doKeyDown(evt) {

        switch (evt.keyCode) {
          case 38 /* Up arrow was pressed */:
            zpos= (zpos-(0.8*Math.cos(ypos))); 
            xpos= (xpos-(0.8*Math.sin(ypos)));
            break;
          case 40 /* Down arrow was pressed */:
            zpos= (zpos+(0.8*Math.cos(ypos)));
            xpos= (xpos+(0.8*Math.sin(ypos)));
            break;
          case 37 /* Left arrow was pressed */:
            ypos += 0.1;
            break;
          case 39 /* Right arrow was pressed */:
            ypos -= 0.1;
            break;
          case 87:  /* W was pressed */
            camera.position.y += 0.5;                        
            break;
          case 83:  /* S was pressed */
            camera.position.y -= 0.5;                        
            break;
        }
      }

      // three basic components of a scene
      var scene = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.01,
        1000
      );
      var renderer = new THREE.WebGLRenderer();

      // create a new geometry
      var geom = new THREE.Geometry();
      var ang = 0.0;
      var r1 = 4.0;
      var r2 = 3.0;
      let adjustment = 0.09223752844;
      adjustment /= 10;
      ang += adjustment;
      //centro
      var geometry = new THREE.BoxGeometry( 20, 1, 25 );
      var patas = new THREE.BoxGeometry(1,15,1);
      var base = new THREE.BoxGeometry(10,0.2,10);

      // create a Lambert material
      var LambertMaterial = new THREE.MeshLambertMaterial({
        color: 0xc0c0c0
        });

      // create a wireframe material
      var meshMaterial = new THREE.MeshBasicMaterial({
        color: 0xC0C0C0,
        wireframe: true
      });

      var quartzMaterial = new THREE.MeshLambertMaterial ({
          map: THREE.ImageUtils.loadTexture("quartz.jpg")
                                                          });
      var marmolMaterial = new THREE.MeshLambertMaterial ({
          map: THREE.ImageUtils.loadTexture("quartz.jpg")
                                                          });

      var object = new THREE.Mesh(geometry, marmolMaterial);
      var object1 = new THREE.Mesh(patas, quartzMaterial);
      var object2 = new THREE.Mesh(patas, quartzMaterial);
      var object3 = new THREE.Mesh(patas, quartzMaterial);
      var object4 = new THREE.Mesh(patas, quartzMaterial);
      var bases = new THREE.Mesh(base, LambertMaterial);

      group = new THREE.Object3D(); // create an empty container
      //mesa
      group.add(object); // add a mesh with geometry to it
      //patas
      group.add(object1);
      group.add(object2);
      group.add(object3);
      group.add(object4);
      //maquina del mal
      maq = new THREE.Object3D();
      maq.add(bases);

      object1.position.y=-7.1; object1.position.x = 8; object1.position.z = 7;
      object2.position.y=-7.1; object2.position.x = 8; object2.position.z = -7;
      object3.position.y=-7.1; object3.position.x = -7; object3.position.z = 7;
      object4.position.y=-7.1; object4.position.x = -7; object4.position.z = -7;
      

      scene.add(group); // add the group to the scene
      scene.add(maq);

      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      // create some point lights
      var pointLight = new THREE.PointLight(0xffffff);
      var pointLight2 = new THREE.PointLight(0xffffff);

      // set its position
      pointLight.position.x = 10;
      pointLight.position.y = 50;
      pointLight.position.z = 130;

      // add to the scene
      scene.add(pointLight);

      // set its position
      pointLight2.position.x = 10;
      pointLight2.position.y = -50;
      pointLight2.position.z = -130;

      // add to the scene
      scene.add(pointLight2);

      // set the background color
      renderer.setClearColor(0x000022, 1);

      var render = function() {
        requestAnimationFrame(render);
        console.log("position of y: " + angle);
        console.log("position of zpos: " + zpos);
        console.log("position of xpos: " + xpos);
        group.rotation.y += 0.005;
        bases.rotation.y += 0.005;
        
        group.rotation.x = 50;
        maq.position.y = -10;
        group.position.y = -10;
        bases.rotation.x = 50;
        bases.position.y= 0.7;
        camera.position.z = zpos; 
        camera.position.x = xpos;
        camera.rotation.y = ypos;
        renderer.render(scene, camera);
      };

      render();
    </script>
  </body>
</html>